@import url('https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600;700&family=Playfair+Display:wght@600&display=swap');

:root{
   --beige-1: #fbf7ec;
   --beige-2: #eef5ea;
   --leaf: #1d5f2f; 
   --mint: #7eb38b; 
   --muted: #6a7a68;
   --card: rgba(255, 255, 255, 0.95); 
   --shadow: 0 16px 40px rgba(18, 30, 20, 0.12); 
   --radius: 22px; 
   --btn-radius: 999px; 
   --accent-glow: rgba(126, 179, 139, 0.25);
   --glass: rgba(255, 255, 255, 0.7);
}



.timerDisplay, .progressBarInner {
    will-change: transform, opacity, color;
}

/* Update the container to center its contents */
.forestPreview {
    display: flex;
    flex-direction: column;
    align-items: center; /* Centers items horizontally */
    justify-content: center; /* Centers items vertically if there is extra height */
    width: 100%;
}

/* Ensure the stageBox itself is centered and has no odd margins */
.stageBox {
    margin: 10px auto 0 auto; /* Horizontal 'auto' ensures it centers in non-flex parents too */
    display: flex; 
    align-items: center; 
    justify-content: center;
    /* keep your existing styles below */
}

*{box-sizing:border-box}
html,body{
   height:100%;
   margin:0;
   font-family: 'Quicksand', sans-serif, system-ui; 
   color:#15311f;
   -webkit-font-smoothing:antialiased;
   overflow-x: hidden; 
   font-weight: 600; 
   background-color: var(--beige-1); 
   background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 100 100"><circle cx="50" cy="50" r="1" fill="%23dce4d9" opacity="0.5"/></svg>'); 
   background-repeat: repeat;
   background-attachment: fixed;
}
a{color:var(--leaf); text-decoration:none}
button{font-family:inherit; border:none}

.app { 
   max-width:1160px; 
   margin:28px auto; 
   padding:18px; 
   transform: translateY(-5px); 
}

.topbar{ display:flex; align-items:center; justify-content:space-between; gap:12px; position:sticky; top:18px; z-index:20; }
.brand{ display:flex; gap:12px; align-items:center; background:var(--card); padding:10px 14px; border-radius:18px; box-shadow:var(--shadow); }
.logo { width:50px; height:50px; border-radius:12px; background:linear-gradient(135deg,var(--mint),#4CAF50); display:flex; align-items:center; justify-content:center; box-shadow:0 8px 20px rgba(88,160,98,0.1); }
.brand h1{margin:0;font-family:'Playfair Display',serif;font-size:18px; color:var(--leaf)}
.brand p{margin:0;font-size:12px;color:var(--muted)}

.tabs { display:flex; gap:8px; align-items:center; }
.tab { 
   background:transparent; 
   border-radius:18px; 
   padding:12px 20px; 
   cursor:pointer; 
   font-weight:700; 
   color:var(--muted); 
   border:1px solid transparent; 
   transition:all .3s ease-in-out; 
}
.tab:hover{ color:var(--leaf); background:rgba(255,255,255,0.7); }
.tab.active{ 
   background:var(--card); 
   color:var(--leaf); 
   box-shadow:var(--shadow); 
   border-color: rgba(56,121,79,0.06); 
   transform: translateY(-2px);
}

.card { 
   background:var(--card); 
   border-radius:var(--radius); 
   padding:26px; 
   margin-top:22px; 
   box-shadow:var(--shadow); 
   transition: box-shadow .3s, transform .2s;
}

.grid { display:grid; grid-template-columns: 1fr 400px; gap:22px; align-items:start; }
@media (max-width:980px){ .grid{ grid-template-columns: 1fr; } .rightCol{ order:-1 } }

.timerWrap{ 
   padding:30px; 
   display:flex; 
   flex-direction:column; 
   align-items:center; 
   gap:18px; 
}
.timerTitle{ font-weight:800; font-size:24px; color:var(--leaf); margin:0 }
.timerDisplay{ 
   font-size: 100px; 
   font-weight:900; 
   color:var(--leaf); 
   background:linear-gradient(180deg,#fff,#f7fff4); 
   padding:20px 40px; 
   border-radius:30px; 
   box-shadow:0 15px 35px rgba(50,100,60,0.15);
   min-width:280px; 
   text-align:center;
   letter-spacing: -2px;
   border: 4px solid var(--mint); 
}
.progressBarOuter{ 
   width:320px;
   height:16px; 
   background:var(--glass); 
   border-radius:var(--btn-radius); 
   overflow:hidden; 
   box-shadow: inset 0 2px 8px rgba(0,0,0,0.05); 
   border:1px solid rgba(0,0,0,0.03) 
}
.progressBarInner{ 
   height:100%; 
   width:0%; 
   background:linear-gradient(90deg,var(--mint),var(--leaf)); 
   transition:width 320ms linear; 
   border-radius:var(--btn-radius);
}

.controls{ display:flex; gap:16px; align-items:center; margin-top:20px; flex-wrap:wrap; justify-content:center;}
.btnPrimary{ 
   background:linear-gradient(90deg,var(--mint),var(--leaf)); 
   color:#ffffff; 
   border:none; 
   padding:12px 24px; 
   border-radius:var(--btn-radius); 
   font-weight:800; 
   cursor:pointer; 
   box-shadow:0 15px 40px var(--accent-glow); 
}
.btnGhost{ 
   background:var(--glass); 
   border:1px solid rgba(21,49,31,0.1); 
   padding:10px 16px; 
   border-radius:16px; 
   cursor:pointer; 
   color:var(--leaf); 
   font-weight:700;
}

.presetRow{ display:flex; gap:10px; flex-wrap:wrap; justify-content:center; margin-top:10px }
.preset{ 
   padding:10px 16px; 
   border-radius:var(--btn-radius); 
   background:var(--glass); 
   border:1px solid rgba(0,0,0,0.08); 
   cursor:pointer; 
   font-weight:700; 
   color:var(--leaf);
}
.preset.active{ 
   box-shadow:0 10px 30px var(--accent-glow); 
   border-color: var(--mint);
   background: linear-gradient(180deg, #fff, #f6fff6);
}
.customInput{ 
   width:140px; 
   padding:12px 14px; 
   border-radius:18px; 
   border:1px solid rgba(0,0,0,0.1); 
   text-align:center; 
   font-weight: 700;
}

.stageBox{ 
   width:260px; 
   height:260px; 
   border-radius:var(--radius); 
   background:linear-gradient(180deg,#fff,#f4fff6); 
   display:flex; 
   align-items:center; 
   justify-content:center; 
   box-shadow:0 15px 40px rgba(0,0,0,0.06); 
   margin-top:10px; 
   font-size: 100px; /* Adjusted size */
   line-height: 1; /* Helps centering */
}

.stageCaption{ color:var(--muted); margin-top:10px; font-weight:700; font-size:14px; text-align:center; }

.gardenGrid{ width:100%; display:grid; grid-template-columns: repeat(3,1fr); gap:12px; }
@media (max-width:480px){ .gardenGrid{ grid-template-columns: repeat(2,1fr); } }


/* Tree Detail Overlay */
.modal-overlay {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background: rgba(21, 49, 31, 0.4); backdrop-filter: blur(4px);
    display: none; align-items: center; justify-content: center; z-index: 2000;
}
.modal-card {
    background: var(--card); padding: 30px; border-radius: var(--radius);
    max-width: 320px; width: 90%; text-align: center; box-shadow: var(--shadow);
}
.gardenItem{ 
   background:linear-gradient(180deg,#fff,#f7fff2); 
   border-radius:16px; 
   padding:15px; 
   min-height:120px; 
   display:flex; 
   flex-direction:column; 
   align-items:center; 
   justify-content:center; 
   gap:4px; 
   box-shadow:0 8px 18px rgba(0,0,0,0.05); 
   text-align: center;
   cursor: pointer;
    transition: transform 0.2s ease;
}
.gardenItem:hover { transform: translateY(-5px); }
.gardenItem .status-label { font-size: 10px; text-transform: uppercase; letter-spacing: 1px; margin-top: 5px; opacity: 0.8; }
.name-input { 
    width: 100%; padding: 10px; margin-top: 15px; border-radius: 12px; 
    border: 1px solid rgba(0,0,0,0.1); font-family: inherit; text-align: center;
}


.gardenItem.dead-tree {
    background: #f0f0f0;
    opacity: 0.5;
    filter: grayscale(1);
    border: 1px dashed #ccc;
    box-shadow: none;
}

.tree-info { font-size: 11px; color: var(--muted); line-height: 1.3; }
.tree-length { font-weight: 700; color: var(--leaf); font-size: 10px; margin-top: 2px; }

.statsGrid{ display:grid; grid-template-columns:repeat(3,1fr); gap:16px; margin-top:16px; }
@media (max-width:820px){ .statsGrid{ grid-template-columns: 1fr; } }
.statCard{ 
   background:linear-gradient(180deg,#fff,#fbfff6); 
   padding:16px; 
   border-radius:16px; 
   box-shadow:0 8px 20px rgba(0,0,0,0.04); 
   text-align:center;
   border: 1px solid rgba(0,0,0,0.03);
}
.statNumber{ font-weight:900; font-size:32px; color:var(--leaf); margin-top:4px; }

/* WELCOME OVERLAY UPDATED: STATIC & SMOOTH */
.welcome-overlay {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background: var(--beige-1);
    z-index: 1000; display: flex; flex-direction: column; align-items: center; justify-content: center; 
    transition: opacity 1.5s ease-in-out;
}
.welcome-overlay.hidden { opacity: 0; pointer-events: none; }
.welcome-content { text-align: center; }
.welcome-text-line { 
    opacity: 0; 
    margin: 10px 0; 
    transition: opacity 2s ease-in-out; 
}
.welcome-text-line.fade-in { opacity: 1; }

#line1 { font-size: 32px; font-family: 'Quicksand', color: var(--muted); font-weight: 400; }
#line2 { font-size: 84px; font-family: 'Quicksand', serif; color: var(--leaf); font-weight: 700; letter-spacing: 2px; }

.sparkle{ position:fixed; width:6px; height:6px; border-radius:50%; background:rgba(255,255,255,0.9); pointer-events:none; z-index:2 }

/* Add to styles.css */
.leaderboard-list {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.leaderboard-item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 16px;
  background: var(--glass);
  border-radius: 16px;
  border: 1px solid rgba(0,0,0,0.05);
  cursor: pointer;
  transition: all 0.3s ease;
}

.leaderboard-item:hover {
  background: white;
  transform: translateY(-2px);
  box-shadow: 0 8px 20px rgba(0,0,0,0.08);
}

.leaderboard-item .rank {
  font-weight: 800;
  font-size: 20px;
  color: var(--leaf);
  width: 40px;
  text-align: center;
}

.leaderboard-item .user-info {
  flex-grow: 1;
}

.leaderboard-item .username {
  font-weight: 800;
  color: var(--leaf);
}

.leaderboard-item .user-stats {
  font-size: 12px;
  color: var(--muted);
}

.leaderboard-item .forest-count {
  background: linear-gradient(90deg, var(--mint), var(--leaf));
  color: white;
  padding: 6px 12px;
  border-radius: 20px;
  font-weight: 800;
  font-size: 14px;
}

.forests-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
  gap: 12px;
  margin-top: 12px;
}

.forest-card {
  background: var(--glass);
  padding: 16px;
  border-radius: 16px;
  border: 1px solid rgba(0,0,0,0.05);
  cursor: pointer;
  text-align: center;
  transition: all 0.3s ease;
}

.forest-card:hover {
  background: white;
  transform: translateY(-3px);
  box-shadow: 0 8px 20px rgba(0,0,0,0.08);
}

.forest-card .forest-emoji {
  font-size: 40px;
  margin-bottom: 8px;
}

.forest-card .forest-date {
  font-weight: 800;
  color: var(--leaf);
  margin-bottom: 4px;
}

.forest-card .forest-stats {
  font-size: 12px;
  color: var(--muted);
}

.top-bar {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20px;
}
.brand-group { display: flex; align-items: center; gap: 15px; }
.user-info-chip {
  background: var(--glass);
  padding: 6px 16px;
  border-radius: 50px;
  display: flex;
  align-items: center;
  gap: 12px;
  border: 1px solid rgba(0,0,0,0.05);
}
.custom-select {
  padding: 8px 12px;
  border-radius: 12px;
  border: 1px solid rgba(0,0,0,0.1);
  background: white;
  font-family: inherit;
  font-weight: 700;
  color: var(--leaf);
}
.btnPrimary.small { padding: 6px 12px; font-size: 12px; }
.playfair { font-family: 'Quicksand', serif; color: var(--leaf); margin: 0; }

/* Styling for the forest controls inside the tab */
#gardenTab .custom-select {
    min-width: 200px;
    border: 2px solid var(--mint);
}

#gardenTab #createNewForestBtn {
    box-shadow: 0 4px 12px var(--accent-glow);
}

/* Ensure the layout stacks nicely on mobile */
@media (max-width: 600px) {
    #gardenTab .card div {
        flex-direction: column;
        align-items: flex-start !important;
    }
    #gardenTab .custom-select {
        width: 100%;
    }
}

/* ... keep all your existing CSS above ... */

/* ==================== */
/* MOBILE RESPONSIVE STYLES */
/* ==================== */

/* Base responsive adjustments */
/* =========================================
   IPHONE 13 & MOBILE PROFESSIONAL REFINEMENT
   ========================================= */

@media (max-width: 430px) {
    :root {
        --radius: 20px;
    }

    body {
        /* Prevents "rubber banding" white space on scroll */
        overscroll-behavior-y: none; 
    }

    .app {
        margin: 0 auto;
        padding: 12px 16px env(safe-area-inset-bottom);
        max-width: 100vw;
    }

    /* Sticky Topbar Polish */
    .topbar {
        background: rgba(251, 247, 236, 0.85);
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
        margin: -12px -16px 12px -16px;
        padding: 12px 16px;
        top: 0;
        border-bottom: 1px solid rgba(0,0,0,0.03);
    }

    .brand {
        padding: 8px 12px;
        box-shadow: 0 4px 15px rgba(0,0,0,0.05);
    }

    .logo {
        width: 40px;
        height: 40px;
    }

    .brand h1 { font-size: 15px; }

    /* Compact Tabs - Horizontal Scrolling if needed */
    .tabs {
        overflow-x: auto;
        display: flex;
        padding: 4px 2px;
        gap: 6px;
        -webkit-overflow-scrolling: touch;
        scrollbar-width: none;
    }
    .tabs::-webkit-scrollbar { display: none; }

    .tab {
        flex: 0 0 auto;
        padding: 10px 18px;
        font-size: 13px;
    }

    /* Main Timer Section */
    .timerWrap {
        padding: 10px 0;
    }

    .timerDisplay {
        font-size: 68px; /* Balanced for iPhone 13 width */
        min-width: 100%;
        padding: 20px 0;
        letter-spacing: -3px;
        border-width: 3px;
    }

    .progressBarOuter {
        width: 100%;
        height: 12px;
    }

    /* Professional Control Layout */
    .controls {
        display: grid;
        grid-template-columns: 1fr 1fr; /* Side-by-side buttons */
        gap: 12px;
        width: 100%;
    }

    .btnPrimary {
        grid-column: span 2; /* Main action takes full width */
        padding: 16px;
        font-size: 17px;
    }

    .btnGhost {
        padding: 14px;
        font-size: 14px;
        display: flex;
        justify-content: center;
        align-items: center;
    }

    .presetRow {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        width: 100%;
        gap: 8px;
    }

    .preset {
        padding: 12px 0;
        font-size: 13px;
    }

    .customInput {
        grid-column: span 3;
        width: 100%;
        height: 50px; /* Easy thumb tap */
    }

    /* Visual Stage */
    .stageBox {
        width: 200px;
        height: 200px;
        font-size: 80px;
        margin: 20px auto;
    }

    /* Garden Grid Refinement */
    .gardenGrid {
        grid-template-columns: repeat(2, 1fr);
        gap: 10px;
    }

    .gardenItem {
        min-height: 110px;
        padding: 12px;
    }

    /* Stats Grid Refinement */
    .statsGrid {
        grid-template-columns: repeat(2, 1fr);
        gap: 10px;
    }
    .statCard:last-child {
        grid-column: span 2;
    }

    .statNumber { font-size: 26px; }

    /* Modal for iPhone */
    .modal-card {
        width: 85%;
        padding: 24px;
        margin-bottom: 10vh; /* Lifted for keyboard comfort */
    }

    /* Welcome Screen Scaling */
    #line1 { font-size: 20px; }
    #line2 { font-size: 52px; letter-spacing: 1px; }

    /* Leaderboard list refined */
    .leaderboard-item {
        padding: 14px;
    }
    
    .leaderboard-item .rank { width: 25px; font-size: 16px; }
    .leaderboard-item .forest-count { font-size: 12px; }
}

/* Fix for small button logic in Garden Tab */
@media (max-width: 430px) {
    #gardenTab .card div {
        flex-direction: column !important;
        gap: 12px;
    }
    #gardenTab .custom-select {
        width: 100% !important;
        min-width: 100% !important;
    }
    #createNewForestBtn {
        width: 100%;
        padding: 14px;
    }
}